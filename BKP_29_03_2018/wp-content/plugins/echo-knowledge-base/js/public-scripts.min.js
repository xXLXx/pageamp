jQuery(document).ready(function(e){var a=e("#epkb-main-page-container"),t=e("#epkb-content-container"),i=e(".epkb-nav-tabs li"),s=e(".epkb-tab-panel");function n(a){e(".epkb-panel-container .epkb-tab-panel:nth-child("+(a+1)+")").addClass("active")}function o(e,a){var t,i,s,n,o,c=window.location.href;t=c,i="top-category",s=a,n=new RegExp("([?&])"+i+"=.*?(&|$)","i"),o=-1!==t.indexOf("?")?"&":"?",c=t.match(n)?t.replace(n,"$1"+i+"="+s+"$2"):t+o+i+"="+s,window.history.pushState({tab:e},"title",c)}e("body").on("submit","#epkb_search_form",function(a){if(a.preventDefault(),""!==e("#epkb_search_terms").val()){var t={action:"epkb-search-kb",epkb_kb_id:e("#epkb_kb_id").val(),search_words:e("#epkb_search_terms").val()},i="";e.ajax({type:"GET",dataType:"json",data:t,url:ajaxurl,beforeSend:function(a){e(".loading-spinner").css("display","block"),e("#epkb-ajax-in-progress").show()}}).done(function(a){a=a||"",e(".loading-spinner").css("display","none"),i=a.error||"success"!==a.status?epkb_vars.msg_try_again:a.search_result}).fail(function(e,a,t){i=epkb_vars.msg_try_again+". ["+(t||epkb_vars.unknown_error)+"]"}).always(function(){e("#epkb-ajax-in-progress").hide(),i&&(e("#epkb_search_results").css("display","block"),e("#epkb_search_results").html(i))})}}),e("#epkb_search_terms").keyup(function(){this.value||e("#epkb_search_results").css("display","none")}),e(window).on("load",function(){var a=0;t.find(i).each(function(){var t=e(this).outerHeight(!0);t>a&&(a=t)}),t.find(i).css("min-height",a)}),window.onpopstate=function(a){a.state&&-1!==a.state.tab.indexOf("epkb_tab_")?(t.find(".epkb_top_panel").removeClass("active"),e("#main-category-selection").length>0?e("#main-category-selection").val(t.find("#"+a.state.tab).val()):(t.find(".epkb_top_categories").removeClass("active"),t.find("#"+a.state.tab).addClass("active")),t.find("."+a.state.tab).addClass("active")):e("#epkb_tab_1").length>0&&!t.find("#epkb_tab_1").hasClass("active")&&(t.find(".epkb_top_panel").removeClass("active"),e("#main-category-selection").length>0?e("#main-category-selection").val(t.find("#epkb_tab_1").val()):(t.find(".epkb_top_categories").removeClass("active"),t.find("#epkb_tab_1").addClass("active")),t.find(".epkb_tab_1").addClass("active"))},t.find(i).each(function(){e(this).on("click",function(){t.find(i).removeClass("active"),e(this).addClass("active"),t.find(s).removeClass("active"),n(e(this).index()),o(e(this).attr("id"),e(this).data("cat-name"))})}),e("#main-category-selection").change(function(){t.find(s).removeClass("active"),e("#main-category-selection option:selected").each(function(){n(e(this).index()),o(e(this).attr("id"),e(this).data("cat-name"))})}),e(".epkb-section-body .epkb-category-level-2-3").each(function(){e(this).on("click",function(){e(this).next().toggleClass("active")})}),t.find(".epkb-section-body .epkb-category-level-2-3").each(function(){var a=e(this).find("i");e(this).on("click",function(){function e(e){a.hasClass(e[0])?(a.removeClass(e[0]),a.addClass(e[1])):a.hasClass(e[1])&&(a.removeClass(e[1]),a.addClass(e[0]))}e(["ep_font_icon_plus","ep_font_icon_minus"]),e(["ep_font_icon_plus_box","ep_font_icon_minus_box"]),e(["ep_font_icon_right_arrow","ep_font_icon_down_arrow"]),e(["ep_font_icon_arrow_carrot_right","ep_font_icon_arrow_carrot_down"]),e(["ep_font_icon_arrow_carrot_right_circle","ep_font_icon_arrow_carrot_down_circle"]),e(["ep_font_icon_folder_add","ep_font_icon_folder_open"])})}),a.find(".epkb-show-all-articles").on("click",function(){e(this).toggleClass("active");var a=e(this).parent("ul").find("li");e(this).hasClass("active")?(e(this).find(".epkb-show-text").addClass("epkb-hide-elem"),e(this).find(".epkb-hide-text").removeClass("epkb-hide-elem")):(e(this).find(".epkb-show-text").removeClass("epkb-hide-elem"),e(this).find(".epkb-hide-text").addClass("epkb-hide-elem")),e(a).each(function(){e(this).hasClass("epkb-hide-elem")?(e(this).removeClass("epkb-hide-elem"),e(this).addClass("visible")):e(this).hasClass("visible")&&(e(this).removeClass("visible"),e(this).addClass("epkb-hide-elem"))})})});