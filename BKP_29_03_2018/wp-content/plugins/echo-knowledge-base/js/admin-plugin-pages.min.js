jQuery(document).ready(function(e){var a,i=e("#ekb-admin-page-wrap");function n(e,a,i){return'<div class="eckb-top-notice-message"><div class="contents"><span class="'+i+'">'+(e?"<h4>"+e+"</h4>":"")+(a||"")+"</span></div></div>"}!function(){function a(a,n){i.find(a+" > .nav_tab").on("click",function(){i.find(a+" > .nav_tab").removeClass("active"),e(this).addClass("active"),i.find(n+" > .ekb-admin-page-tab-panel").removeClass("active");var o=e(this).index()+1;i.find(n+" > .ekb-admin-page-tab-panel:nth-child( "+o+" ) ").addClass("active")})}a("#welcome_tab_nav","#welcome_panel_container"),a(".add_on_container .epkb-main-nav > .epkb-admin-pages-nav-tabs","#add_on_panels"),a(".epkb-main-nav > .epkb-admin-pages-nav-tabs","#main_panels"),a("#help_tabs_nav","#help_tab_panel")}(),i.find("#epkb_send_feedback").on("click",function(a){i.find(".required").remove(),e(".eckb-top-notice-message").html(""),a.preventDefault();var o=i.find("#your_feedback").val().trim(),t=i.find("#your_email").val().trim(),c=i.find("#your_name").val().trim(),r=!0;if(o||(i.find("#your_feedback").after('<p class="required notification"><span class="error">* '+epkb_vars.input_required+"</span> </p>"),r=!1),t||(i.find("#your_email").after('<p class="required notification"><span class="error">* '+epkb_vars.input_required+"</span> </p>"),r=!1),c||(i.find("#your_name").after('<p class="required notification"><span class="error">* '+epkb_vars.input_required+"</span> </p>"),r=!1),0!=r){var s,l={action:"epkb_send_feedback",_wpnonce_epkb_send_feedback:e("#_wpnonce_epkb_send_feedback").val(),email:t,name:c,feedback:o};e.ajax({type:"POST",dataType:"json",data:l,url:ajaxurl,beforeSend:function(a){e("#epkb-ajax-in-progress").text("Sending feedback ...").dialog("open")}}).done(function(e){s=(e=e||"").error||void 0===e.message?e.message?e.message:n("",epkb_vars.reload_try_again,"error"):e.message}).fail(function(e,a,i){s=i?" ["+i+"]":epkb_vars.unknown_error,s=n(epkb_vars.error_occurred+". "+epkb_vars.msg_try_again,s,"error")}).always(function(){e("#epkb-ajax-in-progress").dialog("close"),s&&(e(".eckb-top-notice-message").replaceWith(s),e("html, body").animate({scrollTop:0},"slow"))})}}),i.find(".ekb-feedback-btn").on("click",function(){i.find(".ekb-feedback-btn").removeClass("ekb-feedback-btn-active"),e(this).addClass("ekb-feedback-btn-active"),"feature-request"===e(this).attr("id")&&i.find("#epkb_feedback_form").show()}),i.find("#epkb_toggle_debug").on("click",function(){e(".eckb-top-notice-message").html("");var a,i={action:"epkb_toggle_debug",_wpnonce_epkb_toggle_debug:e("#_wpnonce_epkb_toggle_debug").val()};e.ajax({type:"POST",dataType:"json",url:ajaxurl,data:i,beforeSend:function(a){e("#epkb-ajax-in-progress").text("Toggling debug ...").dialog("open")}}).done(function(e){(e=e||"").error||void 0===e.message?a=e.message?e.message:n("",epkb_vars.reload_try_again,"error"):window.location.href=window.location.href+"&info_tab=debug"}).fail(function(e,i,o){a=o?" ["+o+"]":epkb_vars.unknown_error,a=n(epkb_vars.error_occurred+". "+epkb_vars.msg_try_again,a,"error")}).always(function(){e("#epkb-ajax-in-progress").dialog("close"),a&&(e(".eckb-top-notice-message").replaceWith(a),e("html, body").animate({scrollTop:0},"slow"))})}),i.find("#close_intro").on("click",function(){i.find(".welcome_header").hide(),e.ajax({type:"POST",dataType:"json",url:ajaxurl,data:{action:"epkb_close_welcome_header"}})}),i.find(".featured_img").on("click",function(a){var n;a.preventDefault(),a.stopPropagation(),i.find(".image_zoom").remove();var o=e(this).find("img");n=o.length>1?e(o[0]).is(":visible")?e(o[0]).attr("src"):e(o[1]).is(":visible")?e(o[1]).attr("src"):e(o[2]).attr("src"):e(this).find("img").attr("src"),e(this).after('<div id="epkb_image_zoom" class="image_zoom"><img src="'+n+'" class="image_zoom"><span class="close icon_close"></span></div>'),e("html, body").bind("click.epkb",function(){e("#epkb_image_zoom").remove(),e("html, body").unbind("click.epkb")})}),e("#kb_name").on("keyup",function(){var a=25-e(this).val().length;e("#character_value").remove(),a<0&&e(this).after('<div id="character_value" class="input_error"><p>'+epkb_vars.reduce_name_size+"</p></div>")}),e("#epkb-welcome-page-img1-thumb").on("click",function(){e("#epkb-welcome-page-img1").show(),e("#epkb-welcome-page-img2").hide(),e("#epkb-welcome-page-img3").hide()}),e("#epkb-welcome-page-img2-thumb").on("click",function(){e("#epkb-welcome-page-img2").show(),e("#epkb-welcome-page-img1").hide(),e("#epkb-welcome-page-img3").hide()}),e("#epkb-welcome-page-img3-thumb").on("click",function(){e("#epkb-welcome-page-img3").show(),e("#epkb-welcome-page-img1").hide(),e("#epkb-welcome-page-img2").hide()}),e("#add_on_panels").on("click",".ep_font_icon_info",function(){e(this).parent().find(".ep_font_icon_info_content").toggle()}),a=e("#epkb-dialog-info-icon").dialog({resizable:!1,autoOpen:!1,modal:!0,buttons:{Ok:function(){e(this).dialog("close")}},close:function(){e("#epkb-dialog-info-icon-msg").html()}}),i.find(".ekb-admin-page-tab-panel, .epkb-config-sidebar-options").on("click",".info-icon",function(){var i=!1,n="",o=e(this).parent().find(".label").text();o=o||"";var t=e(this).find("p").html();if(t){var c=t.split("@");t=c[0]?c[0]:"Help text is coming soon.",c[1]&&(i=!0,n='<img class="epkb-help-image" src="'+c[1]+'">')}else t="Help text is coming soon.";e("#epkb-dialog-info-icon-msg").html("<p>"+t+"</p><br/>"+n),a.dialog({title:o,width:i?1e3:400,maxHeight:i?750:300,open:function(){e("#epkb-dialog-info-icon").find(".epkb-help-image").one("load",function(){a.dialog("option",{position:{my:"center",at:"center",of:window}})}),e(".ui-widget-overlay").bind("click",function(){e("#epkb-dialog-info-icon").dialog("close")})}}).dialog("open")}),e("#epkb-ajax-in-progress").dialog({resizable:!1,height:70,width:200,modal:!1,autoOpen:!1}).hide(),e(".ui-dialog-titlebar").hide(),i.on("click",".eckb-tooltip-button",function(){e(this).parent().find(".eckb-tooltip-contents").fadeToggle()})});